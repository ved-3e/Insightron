# Insightron Configuration
# This file contains all configuration settings for the Insightron transcription application.
# Modify these settings to customize the behavior of your transcription system.

# ============================================================================
# Model Configuration
# ============================================================================
model:
  # Model name: Whisper model size to use for transcription
  # Options: tiny, base, small, medium, large, large-v2, distil-medium.en, distil-large-v2
  # Smaller models are faster but less accurate. Larger models are slower but more accurate.
  # distil-* models are optimized for speed with minimal accuracy loss.
  # Default: medium (good balance of speed and accuracy)
  name: "medium"
  
  # Compute type: Precision/quantization for model inference
  # Options: float16, int8_float16, int8, float32
  # int8 = fastest, lower memory, slight quality loss
  # float16 = good speed, good quality (requires GPU)
  # float32 = slowest, best quality
  # Default: int8 (recommended for most use cases)
  compute_type: "int8"
  
  # Device: Hardware to run the model on
  # Options: auto, cpu, cuda
  # auto = automatically detect and use GPU if available, otherwise CPU
  # cpu = force CPU usage (slower but works everywhere)
  # cuda = force GPU usage (requires NVIDIA GPU with CUDA support)
  # Default: auto
  device: "auto"
  
  # ========== Quality Optimization Settings ==========
  
  # Quality mode: Trade-off between speed and accuracy
  # Options: high, balanced, fast
  # high = maximum accuracy, slower (beam_size=5, best_of=5)
  # balanced = good accuracy and speed (beam_size=3, best_of=3)
  # fast = speed priority, lower accuracy (beam_size=1, best_of=1)
  # Default: high
  quality_mode: "high"
  
  # Enable VAD (Voice Activity Detection): Filter out silence and noise
  # Produces cleaner segments by removing non-speech portions
  # Highly recommended for better quality
  # Default: true
  enable_vad: true
  
  # VAD threshold: Speech detection confidence (0.0-1.0)
  # Lower = more sensitive (captures quieter speech)
  # Higher = less sensitive (only clear speech)
  # Default: 0.5
  vad_threshold: 0.5
  
  # Enable retry: Retry transcription with fallback parameters on failure
  # Increases reliability at cost of potential slower processing on errors
  # Default: true
  enable_retry: true
  
  # Max retries: Number of retry attempts with degraded quality settings
  # 0 = no retries (fail immediately)
  # 1-3 = recommended range
  # Default: 2
  max_retries: 2
  
  # Adaptive VAD: Dynamically adjust VAD threshold based on audio characteristics
  # Helps with varying audio quality and background noise levels
  # Default: false
  adaptive_vad: false
  
  # Batch size: Number of audio chunks to process in parallel (experimental)
  # Higher values can improve throughput but require more memory
  # Default: 1 (sequential processing)
  batch_size: 1
  
  # Enable model warmup: Warm up the model on first load for better first-inference performance
  # Reduces latency on the first transcription after startup
  # Default: true
  enable_warmup: true
  
  # Enable dynamic beam size: Dynamically adjust beam size based on audio characteristics
  # Optimizes speed vs accuracy trade-off automatically
  # Default: true
  enable_dynamic_beam: true

# ============================================================================
# Runtime Configuration
# ============================================================================
runtime:
  # Transcription folder: Where transcription text files (.md) are saved
  # Use absolute path. Backslashes must be doubled (\\) or use forward slashes (/)
  # Default: D:\2. Areas\Ideaverse\Areas\Insights
  transcription_folder: "D:\\2. Areas\\Ideaverse\\Areas\\Insights"
  
  # Recordings folder: Where audio recordings are saved
  # Use absolute path. Backslashes must be doubled (\\) or use forward slashes (/)
  # Default: D:\2. Areas\Ideaverse\Areas\Recordings
  recordings_folder: "D:\\2. Areas\\Ideaverse\\Areas\\Recordings"
  
  # Maximum file size: Maximum audio file size to process (in megabytes)
  # Files larger than this will be rejected with an error
  # Default: 500 (MB)
  max_file_size_mb: 500
  
  # Log level: Verbosity of logging output
  # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
  # DEBUG = very verbose (for troubleshooting)
  # INFO = normal operation messages
  # WARNING = only warnings and errors
  # Default: INFO
  log_level: "INFO"
  
  # Worker count: Number of parallel workers for batch processing
  # Set to a specific number (e.g., 4) or leave commented out for auto-detection
  # Auto-detection uses os.cpu_count() to match your CPU cores
  # Higher values = faster batch processing but more CPU/memory usage
  # Default: auto (commented out)
  # worker_count: 4

# ============================================================================
# Realtime Transcription Configuration
# ============================================================================
realtime:
  # Sample rate: Audio sample rate in Hz for realtime recording
  # Options: 8000, 16000, 22050, 44100, 48000
  # 16000 Hz is optimal for Whisper and speech recognition
  # Higher rates increase quality but also processing time and memory
  # Default: 16000
  sample_rate: 16000
  
  # Buffer duration: Size of the audio ring buffer in seconds
  # This is the maximum audio history kept in memory
  # Larger buffer = more context but more memory usage
  # Default: 30 (seconds)
  buffer_duration_seconds: 30
  
  # Chunk duration: Length of audio chunks sent to the model in seconds
  # Larger chunks = better context but slower transcription
  # Smaller chunks = faster but may miss context
  # Default: 5 (seconds)
  chunk_duration_seconds: 5
  
  # Stride: How often to run inference in seconds
  # Smaller stride = more frequent updates but higher CPU usage
  # Larger stride = less frequent updates but lower CPU usage
  # Must be â‰¤ chunk_duration_seconds
  # Default: 1 (second)
  stride_seconds: 1
  
  # Silence threshold: RMS threshold below which audio is considered silence
  # Range: 0.0 - 1.0 (normalized)
  # Lower values = more sensitive (transcribes quieter audio)
  # Higher values = less sensitive (ignores quiet audio)
  # Default: 0.015
  silence_threshold: 0.015
  
  # Silence duration: Minimum silence duration before stopping transcription
  # Used for automatic recording pause detection
  # Default: 0.5 (seconds)
  silence_duration: 0.5

# ============================================================================
# Post-Processing Configuration
# ============================================================================
post_processing:
  # Enable language detection: Automatically detect the language of transcribed text
  # Currently a placeholder for future feature
  # Default: false
  enable_language_detection: false
  
  # Cache size: LRU cache size for language detection results
  # Higher values = more caching but more memory usage
  # Only relevant if language detection is enabled
  # Default: 128
  cache_size: 128
  
  # Formatting style: How to format transcription output
  # Options: auto, paragraphs, minimal
  # auto = smart paragraph breaks based on content analysis
  # paragraphs = new paragraph every 3 sentences
  # minimal = new paragraph every 5 sentences
  # Default: auto
  formatting_style: "auto"

# ============================================================================
# Transcription Optimization Configuration
# ============================================================================
transcription:
  # Segment merge threshold: Confidence score threshold for merging consecutive segments
  # Range: -1.0 to 0.0 (log probabilities)
  # Lower values (e.g., -0.8) = merge more aggressively
  # Higher values (e.g., -0.3) = merge only high-confidence segments
  # Default: -0.5 (balanced)
  segment_merge_threshold: -0.5
  
  # Minimum segment duration: Filter out very short segments (in seconds)
  # Helps remove micro-fragments and stutters
  # Default: 0.1 (100 milliseconds)
  min_segment_duration: 0.1
  
  # Progress update frequency: Update progress every N%
  # Lower values = more frequent updates (may slow down UI)
  # Higher values = less frequent updates (smoother performance)
  # Default: 5 (%)
  progress_update_frequency: 5
  
  # Enable segment filtering: Filter low-confidence micro-segments
  # Improves output quality by removing noise
  # Default: true
  enable_segment_filtering: true
  
  # Enable audio normalization: Normalize audio levels for better transcription quality
  # Reduces clipping and improves accuracy on varying volume levels
  # Default: true
  enable_audio_normalization: true
  
  # Enable audio preprocessing: Apply audio preprocessing (normalization, resampling)
  # Improves transcription accuracy, especially for low-quality recordings
  # Default: true
  enable_audio_preprocessing: true
  
  # Segment cache size: Number of segment metadata entries to cache
  # Higher values = better performance on repeated operations but more memory
  # Default: 1000
  segment_cache_size: 1000
  
  # Enable parallel segment processing: Process segments in parallel (experimental)
  # May improve performance on multi-core systems but can increase memory usage
  # Default: false
  enable_parallel_segments: false

